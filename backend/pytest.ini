[pytest]
# 비동기 테스트 설정
asyncio_mode = auto

# 테스트 경로 및 패턴
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# 출력 옵션
addopts = -v --tb=short --strict-markers --strict-config

# 테스트 마커 정의
markers =
    # 테스트 유형별 마커
    unit: 단위 테스트 (빠른 실행, 외부 의존성 없음)
    integration: 통합 테스트 (DB 및 서비스 연동)
    api: API 테스트 (HTTP 엔드포인트)
    e2e: E2E 테스트 (전체 워크플로우)
    
    # 실행 특성별 마커
    slow: 느린 테스트 (선택적 실행)
    asyncio: 비동기 테스트
    
    # 기능별 마커
    auth: 인증 관련 테스트
    media: 미디어 관련 테스트
    project: 프로젝트 관련 테스트
    note: 노트 관련 테스트
    search: 검색 관련 테스트
    github: GitHub 연동 관련 테스트

# 경고 필터
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# 최소 테스트 커버리지 (선택사항)
# addopts = --cov=app --cov-report=html --cov-report=term-missing --cov-fail-under=80